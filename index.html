<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-如何用hexo建立自己的blog并部署到github中" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/07/%E5%A6%82%E4%BD%95%E7%94%A8hexo%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84blog%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github%E4%B8%AD/" class="article-date">
  <time datetime="2020-07-07T11:21:26.000Z" itemprop="datePublished">2020-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/07/%E5%A6%82%E4%BD%95%E7%94%A8hexo%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84blog%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github%E4%B8%AD/">如何用hexo建立自己的blog并部署到github中</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="noopener">Markdown</a>（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<p>hexo的网站：<a href="https://hexo.io/zh-cn" target="_blank" rel="noopener">hexo</a></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul>
<li><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> (Node.js 版本需不低于 8.10，建议使用 Node.js 10.0 及以上版本)</li>
<li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></li>
</ul>
<h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>全局安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h2 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#&#x2F;&#x2F; &lt;folder&gt;是你的文件名  如 hexo init blog</span><br><span class="line">$ hexo init &lt;folder&gt;	</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>

<p>建好后，可以运行<code>$ hexo server</code>查看你的本地博客</p>
<h2 id="部署到github中"><a href="#部署到github中" class="headerlink" title="部署到github中"></a>部署到github中</h2><ol>
<li><p>安装 <a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener">hexo-deployer-git</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save hexo-deployer-git</span><br></pre></td></tr></table></figure>
</li>
<li><p>在github创建一个新的repository，命名为<code>&lt;username&gt;.github.io</code></p>
</li>
<li><p>在 <strong>_config.yml</strong>（如果有已存在的请删除）添加如下配置：</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:&#x2F;&#x2F;github.com&#x2F;&lt;username&gt;&#x2F;&lt;project&gt;</span><br><span class="line">  #repo是github创建的地址 example, https:&#x2F;&#x2F;github.com&#x2F;hexojs&#x2F;hexojs.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>运行<code>hexo deploy</code>推送到github仓库</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/07/%E5%A6%82%E4%BD%95%E7%94%A8hexo%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84blog%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github%E4%B8%AD/" data-id="ckcbvj8ji0001j4wg2ehw2cv8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/07/hello-world/" class="article-date">
  <time datetime="2020-07-07T10:34:50.949Z" itemprop="datePublished">2020-07-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/07/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/07/hello-world/" data-id="ckcbt8sj80000wgwg8w40dj4n" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-我的第一篇博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/05/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2020-07-05T10:51:25.000Z" itemprop="datePublished">2020-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/05/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">我的第一篇博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>React有props和state:</p>
<ol>
<li>props意味着父级分发下来的属性</li>
<li>state意味着组件内部可以自行管理的状态，并且整个React没有数据向上回溯的能力，这就是react的单向数据流</li>
</ol>
<p>这就意味着如果是一个数据状态非常复杂的应用，更多的时候发现<strong>React根本无法让两个组件互相交流</strong>，使用对方的数据，react的通过层级传递数据的这种方法是非常难受的，这个时候，迫切需要一个机制，<strong>把所有的state集中到组件顶部，能够灵活的将所有state各取所需的分发给所有的组件</strong>，是的，这就是redux</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ol>
<li>redux是的诞生是为了给 React 应用提供「可预测化的状态管理」机制。</li>
<li>Redux会将整个应用状态(其实也就是数据)存储到到一个地方，称为store</li>
<li>这个store里面保存一棵状态树(state tree)</li>
<li>组件改变state的唯一方法是通过调用store的dispatch方法，触发一个action，这个action被对应的reducer处理，于是state完成更新</li>
<li>组件可以派发(dispatch)行为(action)给store,而不是直接通知其它组件</li>
<li>其它组件可以通过订阅store中的状态(state)来刷新自己的视图</li>
</ol>
<h2 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h2><ol>
<li>创建reducer<ul>
<li>可以使用单独的一个reducer,也可以将多个reducer合并为一个reducer，即：<code>combineReducers()</code></li>
<li>action发出命令后将state放入reucer加工函数中，返回新的state,对state进行加工处理</li>
</ul>
</li>
<li>创建action<ul>
<li>用户是接触不到state的，只能有view触发，所以，这个action可以理解为指令，需要发出多少动作就有多少指令</li>
<li>action是一个对象，必须有一个叫type的参数，定义action类型</li>
</ul>
</li>
<li>创建的store，使用createStore方法<ul>
<li>store 可以理解为有多个加工机器的总工厂</li>
<li>提供subscribe，dispatch，getState这些方法。</li>
</ul>
</li>
</ol>
<h2 id="按步骤手把手实战。"><a href="#按步骤手把手实战。" class="headerlink" title="按步骤手把手实战。"></a>按步骤手把手实战。</h2><p>上述步骤，对应的序号，我会在相关代码标出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">npm install redux -S &#x2F;&#x2F; 安装</span><br><span class="line"></span><br><span class="line">import &#123; createStore &#125; from &#39;redux&#39; &#x2F;&#x2F; 引入</span><br><span class="line"></span><br><span class="line">const reducer &#x3D; (state &#x3D; &#123;count: 0&#125;, action) &#x3D;&gt; &#123;----------&gt; ⑴</span><br><span class="line">  switch (action.type)&#123;</span><br><span class="line">    case &#39;INCREASE&#39;: return &#123;count: state.count + 1&#125;;</span><br><span class="line">    case &#39;DECREASE&#39;: return &#123;count: state.count - 1&#125;;</span><br><span class="line">    default: return state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const actions &#x3D; &#123;----------&gt;⑵</span><br><span class="line">  increase: () &#x3D;&gt; (&#123;type: &#39;INCREASE&#39;&#125;),</span><br><span class="line">  decrease: () &#x3D;&gt; (&#123;type: &#39;DECREASE&#39;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store &#x3D; createStore(reducer);----------&gt;⑶</span><br><span class="line"></span><br><span class="line">store.subscribe(() &#x3D;&gt;</span><br><span class="line">  console.log(store.getState())</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">store.dispatch(actions.increase()) &#x2F;&#x2F; &#123;count: 1&#125;</span><br><span class="line">store.dispatch(actions.increase()) &#x2F;&#x2F; &#123;count: 2&#125;</span><br><span class="line">store.dispatch(actions.increase()) &#x2F;&#x2F; &#123;count: 3&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>自己画了一张非常简陋的流程图，方便理解redux的工作流程</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/5/20/16ad40d90c5d46fa?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img"></p>
<h1 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h1><p>刚开始就说了，如果把store直接集成到React应用的顶层props里面，只要各个子组件能访问到顶层props就行了，比如这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;顶层组件 store&#x3D;&#123;store&#125;&gt;</span><br><span class="line">  &lt;App &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;顶层组件&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>不就ok了吗？这就是 react-redux。Redux 官方提供的 React 绑定库。 具有高效且灵活的特性。</p>
<h2 id="React-Redux-将组件区分为-容器组件-和-UI-组件"><a href="#React-Redux-将组件区分为-容器组件-和-UI-组件" class="headerlink" title="React Redux 将组件区分为 容器组件 和 UI 组件"></a><strong>React Redux 将组件区分为 容器组件 和 UI 组件</strong></h2><ol>
<li>前者会处理逻辑</li>
<li>后者只负责显示和交互，内部不处理逻辑，状态完全由外部掌控</li>
</ol>
<h2 id="两个核心"><a href="#两个核心" class="headerlink" title="两个核心"></a>两个核心</h2><h3 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h3><p>看我上边那个代码的<strong>顶层组件</strong>4个字。对，你没有猜错。这个顶级组件就是Provider,一般我们都将顶层组件包裹在Provider组件之中，这样的话，所有组件就都可以在react-redux的控制之下了,<strong>但是store必须作为参数放到Provider组件中去</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Provider store &#x3D; &#123;store&#125;&gt;</span><br><span class="line">    &lt;App &#x2F;&gt;</span><br><span class="line">&lt;Provider&gt;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这个组件的目的是让所有组件都能够访问到Redux中的数据。 </span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><p>这个才是react-redux中比较难的部分，我们详细解释一下</p>
<p>首先，先记住下边的这行代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(mapStateToProps, mapDispatchToProps)(MyComponent)</span><br></pre></td></tr></table></figure>

<h4 id="mapStateToProps"><a href="#mapStateToProps" class="headerlink" title="mapStateToProps"></a>mapStateToProps</h4><p>这个单词翻译过来就是<strong>把state映射到props中去</strong> ,其实也就是<strong>把Redux中的数据映射到React中的props中去。</strong></p>
<p>举个栗子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    const mapStateToProps &#x3D; (state) &#x3D;&gt; &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">      	&#x2F;&#x2F; prop : state.xxx  | 意思是将state中的某个数据映射到props中</span><br><span class="line">        foo: state.bar</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>然后渲染的时候就可以使用this.props.foo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Foo extends Component &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">        	&#x2F;&#x2F; 这样子渲染的其实就是state.bar的数据了</span><br><span class="line">            &lt;div&gt;this.props.foo&lt;&#x2F;div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Foo &#x3D; connect()(Foo);</span><br><span class="line">export default Foo;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>然后这样就可以完成渲染了</p>
<h4 id="mapDispatchToProps"><a href="#mapDispatchToProps" class="headerlink" title="mapDispatchToProps"></a>mapDispatchToProps</h4><p>这个单词翻译过来就是就是<strong>把各种dispatch也变成了props让你可以直接使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const mapDispatchToProps &#x3D; (dispatch) &#x3D;&gt; &#123; &#x2F;&#x2F; 默认传递参数就是dispatch</span><br><span class="line">  return &#123;</span><br><span class="line">    onClick: () &#x3D;&gt; &#123;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: &#39;increatment&#39;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br><span class="line">class Foo extends Component &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props);</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return(</span><br><span class="line">        	</span><br><span class="line">             &lt;button onClick &#x3D; &#123;this.props.onClick&#125;&gt;点击increase&lt;&#x2F;button&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Foo &#x3D; connect()(Foo);</span><br><span class="line">export default Foo;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>组件也就改成了上边这样，可以直接通过this.props.onClick，来调用dispatch,这样子就不需要在代码中来进行store.dispatch了</p>
<h4 id="mapDispatchToProps多种写法"><a href="#mapDispatchToProps多种写法" class="headerlink" title="mapDispatchToProps多种写法"></a>mapDispatchToProps多种写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">传统写法：</span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch)&#x3D;&gt;&#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    abc:(aaa)&#x3D;&gt;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type:&#39;ADD&#39;,</span><br><span class="line">        id:num++,</span><br><span class="line">        text:aaa,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">      qqw:(aaa)&#x3D;&gt;&#123;</span><br><span class="line">          dispatch(&#123;</span><br><span class="line">              type:&#39;TYY&#39;,</span><br><span class="line">              id:num++,</span><br><span class="line">              text:aaa,</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">或者：</span><br><span class="line">function mapDispatchToProps(dispatch) &#123;</span><br><span class="line">   return &#123;</span><br><span class="line">         onIncrement: (...args) &#x3D;&gt; dispatch(actions.onIncrement(...args)),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">第二种写法：</span><br><span class="line">const ActionCreators &#x3D; &#123;</span><br><span class="line">	 abc:aaa&#x3D;&gt;&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            type:&#39;ADD&#39;,</span><br><span class="line">            id:num++,</span><br><span class="line">            text:aaa,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    qqw:aaa&#x3D;&gt;(&#123;</span><br><span class="line">        type:&#39;TYY&#39;,</span><br><span class="line">        id:num++,</span><br><span class="line">        text:aaa,</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;</span><br><span class="line">const mapDispatchToProps &#x3D; ActionCreators</span><br><span class="line">实例：</span><br><span class="line">import &#123; creament, decreament, setcount &#125; from &#39;..&#x2F;redux&#x2F;actions.js&#39;</span><br><span class="line">import ReduxTest from &#39;..&#x2F;views&#x2F;reduxTest.jsx&#39;</span><br><span class="line"></span><br><span class="line">export default connect((state) &#x3D;&gt; (&#123;count: state.count &#125;), &#123;</span><br><span class="line">  creament,</span><br><span class="line">  decreament,</span><br><span class="line">  setcount,</span><br><span class="line">&#125;)(ReduxTest)</span><br><span class="line"></span><br><span class="line">方法三：</span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch) &#x3D;&gt; &#123;</span><br><span class="line">	return bindActionCreators(ActionCreators, dispatch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>react-redux的基本介绍就到这里了</p>
<h1 id="Redux-DevTool"><a href="#Redux-DevTool" class="headerlink" title="Redux DevTool"></a>Redux DevTool</h1><p><code>npm i --save--dev redux-devtools-extension</code></p>
<h1 id="redux-saga"><a href="#redux-saga" class="headerlink" title="redux-saga"></a>redux-saga</h1><p>如果按照原始的redux工作流程，当组件中产生一个action后会直接触发reducer修改state，reducer又是一个纯函数，也就是不能再reducer中进行异步操作；</p>
<p><strong>而往往实际中，组件中发生的action后，在进入reducer之前需要完成一个异步任务,比如发送ajax请求后拿到数据后，再进入reducer,显然原生的redux是不支持这种操作的</strong></p>
<p>这个时候急需一个中间件来处理这种业务场景，目前最优雅的处理方式自然就是redux-saga</p>
<h2 id="核心讲解"><a href="#核心讲解" class="headerlink" title="核心讲解"></a>核心讲解</h2><h3 id="1、Saga-辅助函数"><a href="#1、Saga-辅助函数" class="headerlink" title="1、Saga 辅助函数"></a><strong>1、Saga 辅助函数</strong></h3><p>redux-saga提供了一些辅助函数，用来在一些特定的action 被发起到Store时派生任务，下面我先来讲解两个辅助函数：<code>takeEvery</code> 和 <code>takeLatest</code></p>
<ul>
<li><h4 id="takeEvery"><a href="#takeEvery" class="headerlink" title="takeEvery"></a>takeEvery</h4></li>
</ul>
<p><strong>takeEvery就像一个流水线的洗碗工，过来一个脏盘子就直接执行后面的洗碗函数，一旦你请了这个洗碗工他会一直执行这个工作，绝对不会停止接盘子的监听过程和触发洗盘子函数</strong></p>
<p>例如：每次点击 按钮去Fetch获取数据时时，我们发起一个 FETCH_REQUESTED 的 action。 我们想通过启动一个任务从服务器获取一些数据，来处理这个action，类似于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.addEventLister(&#39;xxx&#39;,fn)</span><br></pre></td></tr></table></figure>

<p>当dispatch xxx的时候，就会执行fn方法，</p>
<p>首先我们创建一个将执行异步 action 的任务(也就是上边的fn)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; put：你就认为put就等于 dispatch就可以了；</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; call：可以理解为实行一个异步函数,是阻塞型的，只有运行完后面的函数，才会继续往下；</span><br><span class="line">&#x2F;&#x2F; 在这里可以片面的理解为async中的await！但写法直观多了！</span><br><span class="line">import &#123; call, put &#125; from &#39;redux-saga&#x2F;effects&#39;</span><br><span class="line"></span><br><span class="line">export function* fetchData(action) &#123;</span><br><span class="line">   try &#123;</span><br><span class="line">      const apiAjax &#x3D; (params) &#x3D;&gt; fetch(url, params);</span><br><span class="line">      const data &#x3D; yield call(apiAjax);</span><br><span class="line">      yield put(&#123;type: &quot;FETCH_SUCCEEDED&quot;, data&#125;);</span><br><span class="line">   &#125; catch (error) &#123;</span><br><span class="line">      yield put(&#123;type: &quot;FETCH_FAILED&quot;, error&#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>然后在每次 FETCH_REQUESTED action 被发起时启动上面的任务,也就<strong>相当于每次触发一个名字为 FETCH_REQUESTED 的action就会执行上边的任务</strong>,代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; takeEvery &#125; from &#39;redux-saga&#39;</span><br><span class="line"></span><br><span class="line">function* watchFetchData() &#123;</span><br><span class="line"></span><br><span class="line">  yield* takeEvery(&quot;FETCH_REQUESTED&quot;, fetchData)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：上面的 takeEvery 函数可以使用下面的写法替换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function* watchFetchData() &#123;</span><br><span class="line">  </span><br><span class="line">   while(true)&#123;</span><br><span class="line">     yield take(&#39;FETCH_REQUESTED&#39;);</span><br><span class="line">     yield fork(fetchData);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><h4 id="takeLatest"><a href="#takeLatest" class="headerlink" title="takeLatest"></a>takeLatest</h4></li>
</ul>
<p>在上面的例子中，takeEvery <strong>允许多个 fetchData 实例同时启动</strong>，在某个特定时刻，我们可以启动一个新的 fetchData 任务， 尽管之前还有一个或多个 fetchData 尚未结束</p>
<p>如果我们<strong>只想得到最新那个请求的响应</strong>（例如，始终显示最新版本的数据），我们可以使用 takeLatest 辅助函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; takeLatest &#125; from &#39;redux-saga&#39;</span><br><span class="line"></span><br><span class="line">function* watchFetchData() &#123;</span><br><span class="line">  yield* takeLatest(&#39;FETCH_REQUESTED&#39;, fetchData)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>和takeEvery不同，在任何时刻 takeLatest 只允许执行一个 fetchData 任务，并且这个任务是最后被启动的那个，如果之前已经有一个任务在执行，那之前的这个任务会自动被取消</strong></p>
<h3 id="2、Effect-Creators"><a href="#2、Effect-Creators" class="headerlink" title="2、Effect Creators"></a><strong>2、Effect Creators</strong></h3><p>redux-saga框架提供了很多创建effect的函数，下面我们就来简单的介绍下开发中最常用的几种</p>
<ul>
<li>take(pattern)</li>
<li>put(action)</li>
<li>call(fn, …args)</li>
<li>fork(fn, …args)</li>
<li>select(selector, …args)</li>
</ul>
<h4 id="take-pattern"><a href="#take-pattern" class="headerlink" title="take(pattern)"></a><strong>take(pattern)</strong></h4><p>take函数可以理解为监听未来的action，它创建了一个命令对象，告诉middleware等待一个特定的action， Generator会暂停，直到一个与pattern匹配的action被发起，才会继续执行下面的语句，也就是说，take是一个阻塞的 effect</p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function* watchFetchData() &#123;</span><br><span class="line">   while(true) &#123;</span><br><span class="line">   &#x2F;&#x2F; 监听一个type为 &#39;FETCH_REQUESTED&#39; 的action的执行，直到等到这个Action被触发，才会接着执行下面的 		yield fork(fetchData)  语句</span><br><span class="line">     yield take(&#39;FETCH_REQUESTED&#39;);</span><br><span class="line">     yield fork(fetchData);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="put-action"><a href="#put-action" class="headerlink" title="put(action)"></a><strong>put(action)</strong></h4><p>put函数是用来发送action的 effect，你可以简单的<strong>把它理解成为redux框架中的dispatch函数</strong>，当put一个action后，reducer中就会计算新的state并返回，<strong>注意：</strong> <strong>put 也是阻塞 effect</strong></p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export function* toggleItemFlow() &#123;</span><br><span class="line">    let list &#x3D; []</span><br><span class="line">    &#x2F;&#x2F; 发送一个type为 &#39;UPDATE_DATA&#39; 的Action，用来更新数据，参数为 &#96;data：list&#96;</span><br><span class="line">    yield put(&#123;</span><br><span class="line">      type: actionTypes.UPDATE_DATA,</span><br><span class="line">      data: list</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="call-fn-…args"><a href="#call-fn-…args" class="headerlink" title="call(fn, …args)"></a><strong>call(fn, …args)</strong></h4><p><strong>call函数你可以把它简单的理解为就是可以调用其他函数的函数</strong>，它命令 middleware 来调用fn 函数， args为函数的参数，<strong>注意：</strong> <strong>fn 函数可以是一个 Generator 函数，也可以是一个返回 Promise 的普通函数</strong>，call 函数也是<strong>阻塞 effect</strong></p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export const delay &#x3D; ms &#x3D;&gt; new Promise(resolve &#x3D;&gt; setTimeout(resolve, ms))</span><br><span class="line"></span><br><span class="line">export function* removeItem() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    &#x2F;&#x2F; 这里call 函数就调用了 delay 函数，delay 函数为一个返回promise 的函数</span><br><span class="line">    return yield call(delay, 500)</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    yield put(&#123;type: actionTypes.ERROR&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="fork-fn-…args"><a href="#fork-fn-…args" class="headerlink" title="fork(fn, …args)"></a><strong>fork(fn, …args)</strong></h4><p>fork 函数和 call 函数很像，<strong>都是用来调用其他函数的，但是fork函数是非阻塞函数</strong>，也就是说，<strong>程序执行完 <code>yield fork(fn， args)</code> 这一行代码后，会立即接着执行下一行代码语句，而不会等待fn函数返回结果后</strong>，在执行下面的语句</p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; fork &#125; from &#39;redux-saga&#x2F;effects&#39;</span><br><span class="line"></span><br><span class="line">export default function* rootSaga() &#123;</span><br><span class="line">  &#x2F;&#x2F; 下面的四个 Generator 函数会一次执行，不会阻塞执行</span><br><span class="line">  yield fork(addItemFlow)</span><br><span class="line">  yield fork(removeItemFlow)</span><br><span class="line">  yield fork(toggleItemFlow)</span><br><span class="line">  yield fork(modifyItem)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h4 id="select-selector-…args"><a href="#select-selector-…args" class="headerlink" title="select(selector, …args)"></a><strong>select(selector, …args)</strong></h4><p>select 函数是用来指示 middleware调用提供的选择器获取Store上的state数据，你也可以简单的把它理解为<strong>redux框架中获取store上的 state数据一样的功能</strong> ：<code>store.getState()</code></p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export function* toggleItemFlow() &#123;</span><br><span class="line">     &#x2F;&#x2F; 通过 select effect 来获取 全局 state上的 &#96;getTodoList&#96; 中的 list</span><br><span class="line">     let tempList &#x3D; yield select(state &#x3D;&gt; state.getTodoList.list)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h1 id="一个具体的实例"><a href="#一个具体的实例" class="headerlink" title="一个具体的实例"></a>一个具体的实例</h1><p>*<em>index.js *</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;;</span><br><span class="line">import ReactDOM from &#39;react-dom&#39;;</span><br><span class="line">import &#123;createStore, applyMiddleware&#125; from &#39;redux&#39;</span><br><span class="line">import createSagaMiddleware from &#39;redux-saga&#39;</span><br><span class="line"></span><br><span class="line">import rootSaga from &#39;.&#x2F;sagas&#39;</span><br><span class="line">import Counter from &#39;.&#x2F;Counter&#39;</span><br><span class="line">import rootReducer from &#39;.&#x2F;reducers&#39;</span><br><span class="line"></span><br><span class="line">const sagaMiddleware &#x3D; createSagaMiddleware() &#x2F;&#x2F; 创建了一个saga中间件实例</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 下边这句话和下边的两行代码创建store的方式是一样的</span><br><span class="line">&#x2F;&#x2F; const store &#x3D; createStore(reducers,applyMiddlecare(middlewares))</span><br><span class="line"></span><br><span class="line">const createStoreWithMiddleware &#x3D; applyMiddleware(middlewares)(createStore)</span><br><span class="line">const store &#x3D; createStoreWithMiddleware(rootReducer)</span><br><span class="line"></span><br><span class="line">sagaMiddleware.run(rootSaga)</span><br><span class="line"></span><br><span class="line">const action &#x3D; type &#x3D;&gt; store.dispatch(&#123; type &#125;)</span><br><span class="line"></span><br><span class="line">function render() &#123;</span><br><span class="line">  ReactDOM.render(</span><br><span class="line">    &lt;Counter</span><br><span class="line">      value&#x3D;&#123;store.getState()&#125;</span><br><span class="line">      onIncrement&#x3D;&#123;() &#x3D;&gt; action(&#39;INCREMENT&#39;)&#125;</span><br><span class="line">      onDecrement&#x3D;&#123;() &#x3D;&gt; action(&#39;DECREMENT&#39;)&#125;</span><br><span class="line">      onIncrementAsync&#x3D;&#123;() &#x3D;&gt; action(&#39;INCREMENT_ASYNC&#39;)&#125; &#x2F;&gt;,</span><br><span class="line">    document.getElementById(&#39;root&#39;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render()</span><br><span class="line"></span><br><span class="line">store.subscribe(render)</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>sagas.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import &#123; put, call, take,fork &#125; from &#39;redux-saga&#x2F;effects&#39;;</span><br><span class="line">import &#123; takeEvery, takeLatest &#125; from &#39;redux-saga&#39;</span><br><span class="line"></span><br><span class="line">export const delay &#x3D; ms &#x3D;&gt; new Promise(resolve &#x3D;&gt; setTimeout(resolve, ms));</span><br><span class="line"></span><br><span class="line">function* incrementAsync() &#123;</span><br><span class="line">  &#x2F;&#x2F; 延迟 1s 在执行 + 1操作</span><br><span class="line">  yield call(delay, 1000);</span><br><span class="line">  yield put(&#123; type: &#39;INCREMENT&#39; &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default function* rootSaga() &#123;</span><br><span class="line">  &#x2F;&#x2F; while(true)&#123;</span><br><span class="line">  &#x2F;&#x2F;   yield take(&#39;INCREMENT_ASYNC&#39;);</span><br><span class="line">  &#x2F;&#x2F;   yield fork(incrementAsync);</span><br><span class="line">  &#x2F;&#x2F; &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; 下面的写法与上面的写法上等效</span><br><span class="line">  yield* takeEvery(&quot;INCREMENT_ASYNC&quot;, incrementAsync)</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p><strong>reducer.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default function counter(state &#x3D; 0, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case &#39;INCREMENT&#39;:</span><br><span class="line">      return state + 1</span><br><span class="line">    case &#39;DECREMENT&#39;:</span><br><span class="line">      return state - 1</span><br><span class="line">    case &#39;INCREMENT_ASYNC&#39;:</span><br><span class="line">      return state</span><br><span class="line">    default:</span><br><span class="line">      return state</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>从上面的代码结构可以看出，redux-saga的使用方式还是比较简单的，相比较之前的redux框架的CounterApp，多了一个sagas的文件，reducers文件还是之前的使用方式</p>
<h3 id="redux-saga基本用法总结："><a href="#redux-saga基本用法总结：" class="headerlink" title="redux-saga基本用法总结："></a>redux-saga基本用法总结：</h3><ol>
<li><strong>使用 createSagaMiddleware 方法创建 saga 的 Middleware ，然后在创建的 redux 的 store 时，使用 applyMiddleware 函数将创建的 saga Middleware 实例绑定到 store 上，最后可以调用 saga Middleware 的 run 函数来执行某个或者某些 Middleware 。</strong></li>
<li><strong>在 saga 的 Middleware 中，可以使用 takeEvery 或者 takeLatest 等 API 来监听某个 action ，当某个 action 触发后， saga 可以使用 call 发起异步操作，操作完成后使用 put 函数触发 action ，同步更新 state ，从而完成整个 State 的更新。</strong></li>
</ol>
<hr>
<p>ok,故事到这里就接近尾声了，以上主要介绍了redux,react-redux和redux-saga目前redux全家桶主流的一些产品,接下来,主要会产出一下根据源码,<strong>手写一下redux和react-redux的轮子</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/07/05/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" data-id="ckcbtceuk0000fswg49gj2ccr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/07/%E5%A6%82%E4%BD%95%E7%94%A8hexo%E5%BB%BA%E7%AB%8B%E8%87%AA%E5%B7%B1%E7%9A%84blog%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github%E4%B8%AD/">如何用hexo建立自己的blog并部署到github中</a>
          </li>
        
          <li>
            <a href="/2020/07/07/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/07/05/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/">我的第一篇博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>